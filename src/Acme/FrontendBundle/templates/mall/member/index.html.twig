{% extends 'mall.html.twig' %}

{% block title %}Member index{% endblock %}
{% block stylesheets %}

{% endblock %}
{% block javascripts %}
    <script>
        $(document).ready(function () {
            $("#btnUpdate").on('click',function (){
                let url='/mall/member/';
                let data={
                    head_img:$("#head_img").val(),
                    real_name:$("#real_name").val(),
                    sex:$("#sex").val(),
                };
                $.post(url,data,function (j){
                    if(j.code=='1'){
                        return swal({
                            title: "操作失败",
                            text: j.message,
                            icon: "error",
                            button: "OK",
                        });
                    }
                    return swal({
                        title: "操作成功",
                        text: '资料更新成功',
                        icon: "success",
                        button: "OK",
                    });
                },'json');
            })
        });
    </script>
{% endblock %}

{% block body %}
    <div class="row" style="min-height: 20rem;">
        <div class="col-sm-2 text-center">
            <div class="list-group">
                <a href="javascript:void()" class="list-group-item list-group-item-action active" aria-current="true">
                    会员中心
                </a>
                <a href="/mall/member" class="list-group-item list-group-item-action text-danger">个人信息</a>
                <a href="/mall/member/order" class="list-group-item list-group-item-action">我的订单</a>
                <a href="/mall/cart" class="list-group-item list-group-item-action">购物车</a>
                <a href="/mall/address" class="list-group-item list-group-item-action">收货地址</a>
                <a href="/mall/member/password" class="list-group-item list-group-item-action">更改密码</a>
            </div>
        </div>
        <div class="col-sm-10">
            <h4 style="border-bottom: 1px solid #E1E1E1;padding-bottom: 1rem;">个人信息</h4>
                <div class="mb-3 row">
                    <label for="username" class="col-sm-2 col-form-label">用户名称</label>
                    <div class="col-sm-10">
                        <input type="text" readonly class="form-control-plaintext" id="username" value="{{member.username}}">
                    </div>
                </div>
                <div class="mb-3 row">
                    <label for="phone" class="col-sm-2 col-form-label">注册手机</label>
                    <div class="col-sm-10">
                        <input type="text" readonly class="form-control-plaintext" id="phone" value="{{member.phone}}">
                    </div>
                </div>
                <div class="mb-3 row">
                    <label for="head_img" class="col-sm-2 col-form-label">用户头像</label>
                    <div class="col-sm-6">
                        <input type="text" class="form-control" id="head_img" name="head_img" value="{{member.headImg}}">
                    </div> <div class="col-sm-4">
                       <img width="50" height="50" src="{{member.headImg}}" />
                    </div>
                </div>
                <div class="mb-3 row">
                    <label for="real_name" class="col-sm-2 col-form-label">真实姓名</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" id="real_name" name="real_name" value="{{member.realName}}">
                    </div>
                </div>
                <div class="mb-3 row">
                    <label for="sex" class="col-sm-2 col-form-label">性别</label>
                    <div class="col-sm-10">
                        <select class="form-control" id="sex" name="sex">
                            <option value="0">未知</option>
                            <option {% if member.sex(true)==1 %}selected{% endif%} value="1">男</option>
                            <option {% if member.sex(true)==2 %}selected{% endif%} value="2">女</option>
                        </select>
                    </div>
                </div>
                <div class="mb-3 row">
                    <label for="level" class="col-sm-2 col-form-label">用户等级</label>
                    <div class="col-sm-10">
                        <input type="text" readonly class="form-control-plaintext" id="level" value="{{member.level}}">
                    </div>
                </div>
                <div class="mb-3 row">
                    <label for="point" class="col-sm-2 col-form-label">用户积分</label>
                    <div class="col-sm-10">
                        <input type="text" readonly class="form-control-plaintext" id="point" value="{{member.point}}">
                    </div>
                </div>
                <div class="row">
                    <div class="col-auto offset-sm-2">
                        <button type="button" id="btnUpdate" class="btn btn-primary">更新</button>
                    </div>
                </div>
        </div>
    </div>
{% endblock %}
